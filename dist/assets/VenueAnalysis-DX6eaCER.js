import{a as N,u as w,r as f,j as e,b as S,L as F,g as i,V as z,P as v}from"./index-BEKOxIM-.js";import{H as P,K as T,B as g,C as j}from"./ChartSkeleton-BIvb-tCs.js";import{o as B,B as b,X as A,Y as M,p as L,q as H,R as K,r as E,T as G,s as R}from"./useBreakpoint-DYwBbiUn.js";var U=B({chartName:"BarChart",GraphicalChild:b,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:A},{axisType:"yAxis",AxisComp:M}],formatAxisMap:L});const $=()=>["var(--color-primary-maroon)","var(--color-primary-teal)","var(--color-secondary-gold)","var(--color-secondary-red)","var(--color-secondary-dark-teal)"],D=()=>{const{venues:o,loading:u}=N(),{filteredFixtures:x,loading:y}=w(),c=H("md"),l=u||y,t=f.useMemo(()=>l||!o||o.length===0||!x?[]:o.map(r=>{const p=x.filter(h=>h.venue_id===r.venue_id).length;return{venueName:r.venue_name,matchesHosted:p,venueId:r.venue_id}}).filter(r=>r.matchesHosted>0),[o,x,l]),s=f.useMemo(()=>$(),[]);if(l)return e.jsx("div",{className:"flex items-center justify-center h-full text-gray-500 dark:text-gray-400",children:e.jsx("p",{className:"text-sm md:text-base",children:"Loading venue chart data..."})});if(t.length===0)return e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md h-96 flex items-center justify-center",children:e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm md:text-base",children:"No data available for matches by venue."})});const a=!c;return e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 sm:p-6 rounded-lg shadow-md",children:[e.jsx("h3",{className:"text-base sm:text-lg md:text-xl font-bold text-gray-800 dark:text-gray-100 mb-4",children:"Matches by Venue"}),e.jsx(K,{width:"100%",height:a?Math.max(300,t.length*40):300,children:e.jsxs(U,{data:t,layout:a?"vertical":"horizontal",margin:{top:20,right:a?20:30,left:a?80:20,bottom:a?5:50},children:[e.jsx(E,{strokeDasharray:"3 3",stroke:"var(--color-gray-300)"}),a?e.jsx(A,{type:"number",dataKey:"matchesHosted",stroke:"var(--color-gray-600)",tick:{fontSize:10}}):e.jsx(A,{type:"category",dataKey:"venueName",stroke:"var(--color-gray-600)",interval:0,angle:-40,textAnchor:"end",height:60,tick:{fontSize:12}}),a?e.jsx(M,{type:"category",dataKey:"venueName",stroke:"var(--color-gray-600)",width:100,tick:{fontSize:10}}):e.jsx(M,{type:"number",dataKey:"matchesHosted",stroke:"var(--color-gray-600)",tick:{fontSize:12}}),e.jsx(G,{cursor:{fill:"rgba(0,0,0,0.1)"},contentStyle:{backgroundColor:"var(--color-gray-700)",border:"none",borderRadius:"5px",fontSize:a?"0.75rem":"0.875rem"},labelStyle:{color:"var(--color-secondary-white)"},itemStyle:{color:"var(--color-secondary-white)"}}),e.jsx(R,{wrapperStyle:{fontSize:a?"0.75rem":"0.875rem"}}),e.jsx(b,{dataKey:"matchesHosted",name:"Matches Hosted",isAnimationActive:!0,animationDuration:1500,animationEasing:"ease-in-out",children:t.map((d,r)=>e.jsx(b,{fill:s[r%s.length]},`bar-${d.venueId}`))})]})})]})},q=()=>{const{loading:o,error:u,venues:x,fixtures:y}=N(),{selectedVenue:c}=S(),{filteredFixtures:l}=w();if(o)return e.jsx(F,{message:"Loading venue data..."});if(u)return e.jsxs("div",{className:"text-red-500 text-center p-4",children:["Error: ",u.message]});const t=c?x.find(a=>a.venue_id===c):null,s=f.useMemo(()=>{if(!c||!t)return null;const a=l.filter(n=>n.venue_id===c&&n.status==="Match Finished"),d=y.filter(n=>n.venue_id===c&&n.status==="Match Finished"),r=a.length,p=a.reduce((n,m)=>n+m.home_team_score+m.away_team_score,0),h=a.reduce((n,m)=>n+m.attendance,0),k=r>0?(p/r).toFixed(2):0,C=r>0?Math.round(h/r):0,V=(h&&t.capacity&&r)>0?(h/(r*t.capacity)*100).toFixed(1):0,_=d.sort((n,m)=>m.attendance-n.attendance)[0];return{totalMatchesAtVenue:r,totalGoalsAtVenue:p,avgGoalsPerMatchAtVenue:k,totalAttendanceAtVenue:h,avgAttendancePerMatchAtVenue:C,capacityUtilization:V,highestAttendanceMatch:_}},[c,t,l,y]);return e.jsxs("div",{className:"space-y-6",children:[e.jsx(P,{title:"AFCON 2025 - Venues",subtitle:"Explore stadiums across Morocco",showMascot:!0,pattern:i()}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-md mb-6",children:e.jsx(z,{})}),t?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md flex flex-col md:flex-row items-center space-y-4 md:space-y-0 md:space-x-6",children:[t.image_url&&e.jsx("img",{src:t.image_url,alt:t.venue_name,className:"w-24 h-24 md:w-32 md:h-32 object-cover rounded-lg shadow-lg"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-extrabold text-gray-900 dark:text-white mb-2",children:t.venue_name}),e.jsxs("p",{className:"text-lg text-gray-600 dark:text-gray-300 font-body",children:[t.city,", ",t.country]}),e.jsxs("p",{className:"text-md text-gray-500 dark:text-gray-400 font-body",children:["Capacity: ",t.capacity.toLocaleString()]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4",children:o?Array.from({length:5}).map((a,d)=>e.jsx(T,{},d)):e.jsxs(e.Fragment,{children:[e.jsx(g,{title:"Matches Hosted",value:s.totalMatchesAtVenue,pattern:i(),icon:e.jsx("img",{src:"/logos/png-ball.png",alt:"Ball",className:"w-6 h-6 object-contain"})}),e.jsx(g,{title:"Total Goals",value:s.totalGoalsAtVenue,subtitle:`${s.avgGoalsPerMatchAtVenue} avg/match`,pattern:i(),icon:e.jsx("img",{src:"/logos/coupe.svg",alt:"Trophy",className:"w-6 h-6 object-contain"})}),e.jsx(g,{title:"Average Attendance",value:s.avgAttendancePerMatchAtVenue.toLocaleString(),pattern:i()}),e.jsx(g,{title:"Capacity Utilization",value:`${s.capacityUtilization}%`,trend:parseFloat(s.capacityUtilization)>70?"up":parseFloat(s.capacityUtilization)<50?"down":"neutral",pattern:i()}),e.jsx(g,{title:"Highest Attendance Match",value:s.highestAttendanceMatch?s.highestAttendanceMatch.attendance.toLocaleString():"N/A",subtitle:s.highestAttendanceMatch?`${s.highestAttendanceMatch.home_team_name} vs ${s.highestAttendanceMatch.away_team_name}`:"N/A",pattern:i()})]})}),o?e.jsx(j,{}):e.jsxs(v,{pattern:i(),opacity:.15,className:"bg-primary-maroon p-6 rounded-lg shadow-md h-96 flex flex-col items-center justify-center",children:[e.jsx("h2",{className:"text-xl md:text-2xl font-bold text-secondary-gold font-title mb-4",children:"Morocco Map with Venue Markers - Placeholder"}),e.jsx("img",{src:"/logos/mascot.svg",alt:"Mascot",className:"h-24 w-auto opacity-70"})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:o?e.jsxs(e.Fragment,{children:[e.jsx(j,{}),e.jsx(j,{})]}):e.jsxs(e.Fragment,{children:[e.jsx(v,{pattern:i(),opacity:.05,className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md h-96 flex items-center justify-center relative",children:e.jsx(D,{})}),e.jsx(v,{pattern:i(),opacity:.05,className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md h-96 flex items-center justify-center relative",children:e.jsx("h2",{className:"text-xl md:text-2xl font-bold text-gray-500 dark:text-gray-400 font-body mb-4",children:"Attendance Trend (Line Chart) - Placeholder"})})]})})]}):e.jsx("div",{className:"text-center p-8 bg-white dark:bg-gray-800 rounded-lg shadow-md",children:e.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-300 font-body",children:"Please select a venue from the filter above to view details."})})]})};export{q as default};
